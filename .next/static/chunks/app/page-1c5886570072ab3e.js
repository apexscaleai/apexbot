(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6893:function(e,t,s){Promise.resolve().then(s.bind(s,5597))},2298:function(e,t,s){"use strict";s.d(t,{VoiceBotContextProvider:function(){return w},aI:function(){return i},Gn:function(){return v},Ct:function(){return g},Z$:function(){return b},jq:function(){return y}});var r,n,a,i,o=s(7437),l=s(2265);let c="start_listening",d="start_speaking",x="start_sleeping",u="add_message",m="set_attach_params_to_copy_url",h="add_behind_scenes_event",p=(e,t)=>{switch(t.type){case c:return{...e,status:i.LISTENING,sleepTimer:0};case"start_thinking":return{...e,status:i.THINKING};case d:return{...e,status:i.SPEAKING,sleepTimer:0};case x:return{...e,status:i.SLEEPING};case"increment_sleep_timer":return{...e,sleepTimer:e.sleepTimer+1};case"reset_sleep_timer":return{...e,sleepTimer:0};case u:return{...e,messages:[...e.messages,t.payload]};case m:return{...e,attachParamsToCopyUrl:t.payload};case h:return{...e,behindTheScenesEvents:[...e.behindTheScenesEvents,t.payload]};default:return e}};(r=a||(a={})).SETTINGS_APPLIED="SettingsApplied",r.AGENT_AUDIO_DONE="AgentAudioDone",r.USER_STARTED_SPEAKING="UserStartedSpeaking",r.AGENT_STARTED_SPEAKING="AgentStartedSpeaking",r.CONVERSATION_TEXT="ConversationText",r.END_OF_THOUGHT="EndOfThought";let g=e=>b(e)||v(e),f=e=>void 0!==e.tts_latency,b=e=>void 0!==e.user,v=e=>void 0!==e.assistant;(n=i||(i={})).LISTENING="listening",n.THINKING="thinking",n.SPEAKING="speaking",n.SLEEPING="sleeping",n.NONE="";let j={status:"",sleepTimer:0,messages:[],attachParamsToCopyUrl:!0,behindTheScenesEvents:[]},N=(0,l.createContext)(void 0);function y(){let e=(0,l.useContext)(N);if(!e)throw Error("useVoiceBot must be used within a VoiceBotProvider");return e}function w(e){let{children:t}=e,[s,r]=(0,l.useReducer)(p,j),n=(0,l.useRef)(!1),a=(0,l.useRef)(s.status);(0,l.useEffect)(()=>{a.current=s.status},[s.status]);let i=(0,l.useCallback)(()=>{n.current=!0,r({type:x})},[]),y=(0,l.useCallback)(e=>{r({type:u,payload:e})},[]),w=(0,l.useCallback)(e=>{r({type:h,payload:e})},[]),k=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||"sleeping"!==s.status)&&r({type:d})},[s.status]),I=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||"sleeping"!==s.status)&&r({type:c})},[s.status]),C=(0,l.useCallback)(()=>{"sleeping"===s.status?I(!0):i()},[s.status,I,i]),S=(e,t)=>v(t)&&b(e),D=(0,l.useMemo)(()=>{let e=s.messages.filter(g),t=s.messages.filter(f),r=[];return e.forEach((e,s,n)=>{let a=n[s-1];if(a&&S(e,a)){let e=t.shift();e&&r.push(e)}if(r.push(e),v(e)&&s===n.length-1){let e=t.shift();e&&r.push(e)}}),r},[s.messages]),A=(0,l.useCallback)(e=>{r({type:m,payload:e})},[]),T=(0,l.useMemo)(()=>({...s,isWaitingForUserVoiceAfterSleep:n,displayOrder:D,addVoicebotMessage:y,addBehindTheScenesEvent:w,startSpeaking:k,startListening:I,startSleeping:i,toggleSleep:C,setAttachParamsToCopyUrl:A}),[s,I,k,i,C,A,D,y,w]);return(0,o.jsx)(N.Provider,{value:T,children:t})}},5597:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(7437),n=s(2265),a=s(2298),i=s(7048);function o(e){let{onChatOpen:t}=e;return(0,r.jsx)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-apex-dark/80 backdrop-blur-lg border-b border-apex-border",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-400 to-primary-600 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z"}),(0,r.jsx)("path",{d:"M2 17L12 22L22 17"}),(0,r.jsx)("path",{d:"M2 12L12 17L22 12"})]})}),(0,r.jsx)("span",{className:"text-xl font-bold text-apex-heading",children:"Apex Scale AI"})]}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,r.jsx)("a",{href:"#features",className:"text-apex-text hover:text-apex-heading transition-colors",children:"Features"}),(0,r.jsx)("a",{href:"#process",className:"text-apex-text hover:text-apex-heading transition-colors",children:"Process"}),(0,r.jsx)("button",{onClick:t,className:"btn btn-primary",children:"Try Lexy"})]}),(0,r.jsx)("button",{onClick:t,className:"md:hidden btn btn-primary",children:"Try Lexy"})]})})})}function l(e){let{onChatOpen:t}=e;return(0,r.jsxs)("section",{className:"relative pt-32 pb-20 lg:pt-40 lg:pb-32 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 gradient-bg"}),(0,r.jsx)("div",{className:"container relative",children:(0,r.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,r.jsxs)("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-apex-heading mb-6 leading-tight",children:["Where"," ",(0,r.jsx)("span",{className:"text-gradient",children:"Conversation"}),(0,r.jsx)("br",{}),"Meets"," ",(0,r.jsx)("span",{className:"text-gradient",children:"Conversion"})]}),(0,r.jsxs)("p",{className:"text-xl md:text-2xl text-apex-text mb-8 max-w-3xl mx-auto leading-relaxed",children:["Intelligent AI solutions that help businesses scale, reduce costs, and grow faster through conversational automation."," Experience our unified text and voice agent below and discover how Lexy can transform your customer interactions."]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,r.jsxs)("button",{onClick:t,className:"btn btn-primary btn-large pulse-glow",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.014 8.014 0 01-2.84-.508l-5.58 2.14a.507.507 0 01-.638-.642l2.14-5.58A8.012 8.012 0 014 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})}),"Try Lexy Now"]}),(0,r.jsx)("a",{href:"#features",className:"btn btn-secondary btn-large",children:"Learn More"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mt-16 pt-16 border-t border-apex-border",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-spring mb-2",children:"24/7"}),(0,r.jsx)("div",{className:"text-sm text-apex-text",children:"Available"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-spring mb-2",children:"50%"}),(0,r.jsx)("div",{className:"text-sm text-apex-text",children:"Faster Response"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-spring mb-2",children:"3-6mo"}),(0,r.jsx)("div",{className:"text-sm text-apex-text",children:"ROI Timeline"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-spring mb-2",children:"∞"}),(0,r.jsx)("div",{className:"text-sm text-apex-text",children:"Scalability"})]})]})]})})]})}function c(){let e=[{title:"24/7 Intelligent Engagement",description:"Capture and qualify leads around the clock with instant, contextual responses that ensure no opportunity is ever missed.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Deep Knowledge Integration",description:"Trained on your specific documents, products, and FAQs, making the agent a true expert on your business from day one.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{title:"Seamless Workflow Automation",description:"From booking qualified appointments to CRM integration, our agents streamline operations and save valuable time.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})},{title:"Voice & Text Unified",description:"Seamlessly handle both voice and text conversations with the same intelligent AI, providing flexible interaction options.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})},{title:"Advanced Lead Qualification",description:"Intelligently score and qualify leads using sophisticated conversation analysis and custom business rules.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{title:"Real-time Analytics",description:"Monitor conversation performance, lead quality, and ROI with comprehensive analytics and actionable insights.",icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}];return(0,r.jsx)("section",{id:"features",className:"section-padding border-t border-apex-border",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"text-center mb-16",children:[(0,r.jsx)("span",{className:"text-primary-400 font-semibold text-sm uppercase tracking-wider",children:"Key Capabilities"}),(0,r.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-apex-heading mt-4 mb-6",children:"An Extension Of Your Team"}),(0,r.jsx)("p",{className:"text-xl text-apex-text max-w-3xl mx-auto",children:"Our AI assistants integrate seamlessly with your existing workflow, enhancing your team's capabilities without replacing the human touch."})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"glass-effect rounded-xl p-8 hover:bg-apex-card/70 transition-all duration-300 hover:-translate-y-1",children:[(0,r.jsx)("div",{className:"text-primary-400 mb-4",children:e.icon}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-apex-heading mb-4",children:e.title}),(0,r.jsx)("p",{className:"text-apex-text leading-relaxed",children:e.description})]},t))})]})})}function d(){let e=[{number:"01",title:"Discovery & Analysis",description:"We dive deep into your business goals, customer journey, and operational workflows to identify the highest-impact automation opportunities and create a custom strategy."},{number:"02",title:"Design & Development",description:"We architect and construct your custom AI agent, engineering its personality, knowledge base, and conversational logic for peak performance and seamless brand alignment."},{number:"03",title:"Deploy & Optimize",description:"We seamlessly integrate the agent into your website and systems, then continuously monitor interactions to refine and enhance effectiveness over time."}];return(0,r.jsx)("section",{id:"process",className:"section-padding border-t border-apex-border",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"text-center mb-16",children:[(0,r.jsx)("span",{className:"text-primary-400 font-semibold text-sm uppercase tracking-wider",children:"Our Method"}),(0,r.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-apex-heading mt-4 mb-6",children:"From Concept to Conversion"}),(0,r.jsx)("p",{className:"text-xl text-apex-text max-w-3xl mx-auto",children:"Our proven three-step process ensures your AI assistant delivers maximum ROI while seamlessly integrating with your existing business operations."})]}),(0,r.jsx)("div",{className:"space-y-8",children:e.map((t,s)=>(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-8 p-8 glass-effect rounded-xl hover:bg-apex-card/70 transition-all duration-300",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:t.number})})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-apex-heading mb-4",children:t.title}),(0,r.jsx)("p",{className:"text-apex-text text-lg leading-relaxed",children:t.description})]}),s<e.length-1&&(0,r.jsx)("div",{className:"hidden lg:block flex-shrink-0 text-primary-400",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]},s))}),(0,r.jsx)("div",{className:"text-center mt-16",children:(0,r.jsxs)("div",{className:"glass-effect rounded-xl p-8 max-w-2xl mx-auto",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-apex-heading mb-4",children:"Ready to Get Started?"}),(0,r.jsx)("p",{className:"text-apex-text mb-6",children:"Schedule a free consultation to discuss your specific needs and see how Lexy can transform your customer interactions."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)("button",{className:"btn btn-primary btn-large",children:"Schedule Free Consultation"}),(0,r.jsx)("button",{className:"btn btn-secondary btn-large",children:"View Case Studies"})]})]})})]})})}window.location.origin;let x=(e,t,s)=>(e.getByteFrequencyData(t),Math.min(t.reduce((e,t)=>e+t,0)/t.length/s,1));function u(e){let{agentVoiceAnalyser:t,userVoiceAnalyser:s,onOrbClick:i,status:o,socketState:l,isInitialized:c,requiresUserActionToInitialize:d}=e,u=(0,n.useRef)(null),m=(0,n.useRef)(),[h,p]=(0,n.useState)(1);(0,n.useEffect)(()=>{let e=u.current;if(!e)return;let r=e.getContext("2d");if(!r)return;e.width=200,e.height=200;let n=null,i=null;t&&(n=new Uint8Array(t.frequencyBinCount)),s&&(i=new Uint8Array(s.frequencyBinCount));let l=()=>{let e;r.clearRect(0,0,200,200);let c=0,d=0;t&&n&&(c=x(t,n,255)),s&&i&&(d=x(s,i,255));let u=Math.max(c,d),p=60+20*u;switch(o){case a.aI.LISTENING:(e=r.createRadialGradient(100,100,0,100,100,p)).addColorStop(0,"rgba(34, 197, 94, ".concat(.8+.2*u,")")),e.addColorStop(1,"rgba(34, 197, 94, ".concat(.2+.1*u,")"));break;case a.aI.SPEAKING:(e=r.createRadialGradient(100,100,0,100,100,p)).addColorStop(0,"rgba(59, 130, 246, ".concat(.8+.2*u,")")),e.addColorStop(1,"rgba(59, 130, 246, ".concat(.2+.1*u,")"));break;case a.aI.THINKING:(e=r.createRadialGradient(100,100,0,100,100,p)).addColorStop(0,"rgba(234, 179, 8, ".concat(.8+.2*Math.sin(.01*Date.now()),")")),e.addColorStop(1,"rgba(234, 179, 8, ".concat(.2+.1*Math.sin(.01*Date.now()),")"));break;case a.aI.SLEEPING:(e=r.createRadialGradient(100,100,0,100,100,p)).addColorStop(0,"rgba(156, 163, 175, 0.6)"),e.addColorStop(1,"rgba(156, 163, 175, 0.2)");break;default:(e=r.createRadialGradient(100,100,0,100,100,p)).addColorStop(0,"rgba(59, 130, 246, 0.8)"),e.addColorStop(1,"rgba(59, 130, 246, 0.2)")}r.beginPath(),r.arc(100,100,p*h,0,2*Math.PI),r.fillStyle=e,r.fill(),(o===a.aI.LISTENING||o===a.aI.SPEAKING)&&(r.beginPath(),r.arc(100,100,(p+10)*h,0,2*Math.PI),r.strokeStyle=o===a.aI.LISTENING?"rgba(34, 197, 94, ".concat(.3+.2*u,")"):"rgba(59, 130, 246, ".concat(.3+.2*u,")"),r.lineWidth=2,r.stroke()),m.current=requestAnimationFrame(l)};return l(),()=>{m.current&&cancelAnimationFrame(m.current)}},[t,s,o,h]);let g=()=>{switch(o){case a.aI.LISTENING:return"text-green-400";case a.aI.SPEAKING:return"text-primary-400";case a.aI.THINKING:return"text-yellow-400";case a.aI.SLEEPING:return"text-gray-400";default:return"text-primary-400"}};return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative cursor-pointer transition-transform duration-200 hover:scale-105 active:scale-95",onClick:()=>{p(.95),setTimeout(()=>p(1),150),i()},children:[(0,r.jsx)("canvas",{ref:u,className:"w-48 h-48",style:{filter:"blur(0.5px)"}}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,r.jsx)("svg",{className:"w-8 h-8 ".concat(g()," transition-colors duration-300"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),(0,r.jsx)("div",{className:"mt-4 text-sm font-medium ".concat(g()," transition-colors duration-300"),children:(()=>{if(-1===l&&d&&!c)return"Tap to start";if(0===l)return"Connecting...";switch(o){case a.aI.LISTENING:return"Listening...";case a.aI.SPEAKING:return"Speaking...";case a.aI.THINKING:return"Thinking...";case a.aI.SLEEPING:return"Sleeping - tap to wake";default:return"Ready"}})()}),(0,r.jsx)("div",{className:"mt-2 text-xs text-apex-text text-center max-w-xs",children:o===a.aI.SLEEPING?"Click the orb to wake me up and start our conversation":1===l?"Speak naturally or click the orb to pause":"Initializing voice connection..."})]})}function m(e){let{requiresUserActionToInitialize:t=!1,className:s=""}=e,{status:o,addVoicebotMessage:l,toggleSleep:c,startListening:d,startSpeaking:x}=(0,a.jq)(),m=(0,n.useRef)(null),h=(0,n.useRef)(null),p=(0,n.useRef)(null),[g,f]=(0,n.useState)(!t),[b,v]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1),[y,w]=(0,n.useState)(!1),[k,I]=(0,n.useState)(!1),[C,S]=(0,n.useState)(""),D=(0,n.useRef)(!1),A=(0,n.useRef)(!1),T=(0,n.useRef)(!1),E=(0,n.useRef)(!1);(0,n.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(I(!0),T.current=!0,p.current=new e,p.current.continuous=!1,p.current.interimResults=!0,p.current.lang="en-US",p.current.onstart=()=>{console.log("\uD83C\uDFA4 Speech recognition started"),v(!0),d()},p.current.onresult=e=>{let t="",s="";for(let r=e.resultIndex;r<e.results.length;r++){let n=e.results[r][0].transcript;e.results[r].isFinal?t+=n:s+=n}S(s),t&&(console.log("\uD83C\uDFAF Final transcript:",t),S(""),G(t))},p.current.onend=()=>{console.log("\uD83C\uDFA4 Speech recognition ended"),v(!1)},p.current.onerror=e=>{console.error("\uD83C\uDFA4 Speech recognition error:",e.error),v(!1)}):console.log("❌ Speech recognition not supported")},[]),(0,n.useEffect)(()=>{m.current||(m.current=new(window.AudioContext||window.webkitAudioContext)({latencyHint:"interactive",sampleRate:24e3}),h.current=m.current.createAnalyser(),h.current.fftSize=2048,h.current.smoothingTimeConstant=.96)},[]);let L=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(m.current)try{let s=await m.current.decodeAudioData(e),r=m.current.createBufferSource();r.buffer=s,h.current?(r.connect(h.current),h.current.connect(m.current.destination)):r.connect(m.current.destination),r.start(),r.onended=()=>{console.log("\uD83D\uDD0A Audio playback finished"),t?(console.log("\uD83D\uDC4B Greeting complete, ready for user input"),w(!0),E.current=!0,D.current=!1,N(!1),setTimeout(()=>{T.current&&!b&&(console.log("\uD83C\uDFA4 Auto-starting voice recognition after greeting..."),R())},1e3)):(N(!1),setTimeout(()=>{console.log("\uD83C\uDFA4 Auto-listen check: speechSupportRef=".concat(T.current,", hasGreetedRef=").concat(E.current,", isListening=").concat(b)),T.current&&E.current&&(console.log("\uD83C\uDFA4 Auto-starting voice recognition..."),v(!1),setTimeout(()=>{R()},100))},800))}}catch(e){console.error("Error playing audio:",e),N(!1),t?(w(!0),E.current=!0,D.current=!1):setTimeout(()=>{console.log("\uD83C\uDFA4 Auto-listen check (error case): speechSupportRef=".concat(T.current,", hasGreetedRef=").concat(E.current,", isListening=").concat(b)),T.current&&E.current&&(console.log("\uD83C\uDFA4 Auto-starting voice recognition after audio error..."),v(!1),setTimeout(()=>{R()},100))},800)}},M=async()=>{if(y||D.current)return;D.current=!0,console.log("\uD83D\uDC4B Playing Lexy's greeting..."),N(!0),x();let e="Hi there! I'm Lexy, your AI assistant from Apex Scale AI. I'm here to help you explore how our intelligent automation solutions can transform your business. How can I assist you today?";l({assistant:e});try{console.log("\uD83D\uDD0A Converting greeting to speech...");let t=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(t.ok){let e=await t.arrayBuffer();console.log("\uD83D\uDD0A Playing greeting audio"),await L(e,!0)}else console.error("TTS failed for greeting:",t.status),w(!0),E.current=!0,D.current=!1,N(!1)}catch(e){console.error("Error playing greeting:",e),w(!0),E.current=!0,D.current=!1,N(!1)}},G=async e=>{if(j||e.length<3){console.log("\uD83D\uDD04 Ignoring short or duplicate transcription:",e);return}N(!0),v(!1),l({user:e});try{console.log("\uD83E\uDD16 Sending to Gemini:",e);let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,sessionId:"voice-session"})}),{reply:s}=await t.json();console.log("\uD83E\uDD16 AI response:",s),l({assistant:s}),x(),console.log("\uD83D\uDD0A Converting to speech...");let r=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s})});if(r.ok){let e=await r.arrayBuffer();console.log("\uD83D\uDD0A Playing audio response"),await L(e,!1)}else console.error("TTS failed:",r.status),N(!1)}catch(e){console.error("Error processing transcription:",e),N(!1)}},R=()=>{if(console.log("\uD83C\uDFA4 startVoiceRecognition called: recognition=".concat(!!p.current,", isListening=").concat(b,", isProcessing=").concat(j)),!p.current||b||j)console.log("\uD83C\uDFA4 Cannot start recognition - conditions not met");else try{console.log("\uD83C\uDFA4 Starting speech recognition..."),p.current.start()}catch(e){console.error("Error starting recognition:",e)}},P=()=>{p.current&&b&&p.current.stop()},_=()=>{if(t&&!g){console.log("\uD83D\uDE80 Initializing voice assistant..."),f(!0);return}y?b?P():j||R():M()};return((0,n.useEffect)(()=>{if(g&&!y&&!t&&!D.current&&!A.current){A.current=!0,console.log("\uD83D\uDE80 Starting greeting sequence...");let e=setTimeout(()=>{M()},1e3);return()=>{clearTimeout(e)}}},[g,y,t]),k)?(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)(u,{agentVoiceAnalyser:h.current,userVoiceAnalyser:null,onOrbClick:_,status:o,socketState:y?1:0,isInitialized:g,requiresUserActionToInitialize:t}),(0,r.jsxs)(n.Fragment,{children:[!g&&t&&(0,r.jsx)("button",{className:"text-center w-full mt-4 btn btn-primary",onClick:_,children:(0,r.jsx)("span",{className:"text-xl",children:"Tap to start!"})}),!y&&g&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)("div",{className:"text-apex-text text-sm",children:"Starting Lexy..."})}),j&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsx)("div",{className:"text-blue-400 text-sm",children:o===a.aI.SPEAKING?"Lexy is speaking...":"Processing your request..."})}),y&&!j&&!b&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsxs)("div",{className:"text-green-400 text-sm",children:["Ready! ",i.tq?"Tap":"Click"," the orb to start talking."]})}),b&&!j&&y&&(0,r.jsxs)("div",{className:"text-center mt-4",children:[(0,r.jsx)("div",{className:"text-green-400 text-sm",children:"Listening... Speak now!"}),C&&(0,r.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:['"',C,'"']}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2",children:[i.tq?"Tap":"Click"," the orb to stop"]})]}),o===a.aI.SLEEPING&&(0,r.jsx)("div",{className:"text-center mt-4",children:(0,r.jsxs)("div",{className:"text-apex-text text-sm",children:["Voice assistant is sleeping. ",i.tq?"Tap":"Click"," the orb to wake up."]})})]})]}):(0,r.jsx)("div",{className:s,children:(0,r.jsxs)("div",{className:"text-center p-8",children:[(0,r.jsx)("div",{className:"text-red-400 mb-4",children:"Speech Recognition Not Supported"}),(0,r.jsx)("div",{className:"text-apex-text text-sm",children:"Your browser doesn't support speech recognition. Please use the text chat instead."})]})})}var h=s(8439);let p="https://pbxodnlfnnlreqmuijsi.supabase.co",g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBieG9kbmxmbm5scmVxbXVpanNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODAxMTQsImV4cCI6MjA3MDc1NjExNH0.HzDTRy0eg_YreJIEfLRkVhO1BY39nPb9GCq_cNKDCeE",f=p&&g?(0,h.eI)(p,g):null;async function b(e){if(!f)return console.warn("Supabase not configured, skipping chat message save"),null;let{data:t,error:s}=await f.from("chat_messages").insert([e]).select().single();return s?(console.error("Error saving chat message:",s),null):t}function v(){let{messages:e,addVoicebotMessage:t}=(0,a.jq)(),[s,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(!1),c=(0,n.useRef)(null),d=(0,n.useRef)(crypto.randomUUID()),x=()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{x()},[e]);let u=async e=>{if(!e.trim())return;let s=e.trim();i(""),l(!0),t({user:s});try{await b({session_id:d.current,role:"user",message:s,metadata:{source:"text_widget"}})}catch(e){console.warn("Failed to save user message:",e)}try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,sessionId:d.current})});if(!e.ok)throw Error("Failed to get response");let r=await e.json();if(r.reply){t({assistant:r.reply});try{await b({session_id:d.current,role:"assistant",message:r.reply,metadata:{source:"text_widget",model:"gemini-2.5-flash"}})}catch(e){console.warn("Failed to save assistant message:",e)}}}catch(e){console.error("Error sending message:",e),t({assistant:"I apologize, but I'm having trouble processing your request right now. Please try again in a moment."})}finally{l(!1)}},m=e.filter(a.Ct);return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===m.length&&(0,r.jsxs)("div",{className:"text-center text-apex-text py-8",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto text-primary-400 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.014 8.014 0 01-2.84-.508l-5.58 2.14a.507.507 0 01-.638-.642l2.14-5.58A8.012 8.012 0 014 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})})}),(0,r.jsx)("h3",{className:"font-semibold text-apex-heading mb-2",children:"Start a Conversation"}),(0,r.jsx)("p",{className:"text-sm",children:"Ask me about our AI solutions, pricing, or how we can help your business grow."})]}),m.map((e,t)=>{let s=(0,a.Z$)(e),n=s?e.user:(0,a.Gn)(e)?e.assistant:"";return(0,r.jsx)("div",{className:"flex ".concat(s?"justify-end":"justify-start"),children:(0,r.jsx)("div",{className:"max-w-[80%] px-4 py-2 rounded-2xl ".concat(s?"bg-primary-500 text-white ml-4":"bg-apex-card text-apex-heading mr-4"),children:(0,r.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n})})},t)}),o&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"bg-apex-card text-apex-heading px-4 py-2 rounded-2xl mr-4",children:(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,r.jsx)("div",{ref:c})]}),(0,r.jsxs)("div",{className:"p-4 border-t border-apex-border",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(s))},placeholder:"Type your message...",className:"flex-1 bg-apex-card border border-apex-border rounded-lg px-4 py-2 text-apex-heading placeholder-apex-text focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:o}),(0,r.jsx)("button",{onClick:()=>u(s),disabled:!s.trim()||o,className:"btn btn-primary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),(0,r.jsx)("div",{className:"mt-2 text-xs text-apex-text",children:"You can also speak directly to the voice assistant on the left."})]})]})}function j(){let{addVoicebotMessage:e}=(0,a.jq)(),t=t=>{e({user:t})};return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2 max-w-md",children:["What services does Apex Scale AI offer?","How much does the Lead Capture Bot cost?","Tell me about your pricing packages","How can AI help my business grow?"].map((e,s)=>(0,r.jsxs)("button",{onClick:()=>t(e),className:"text-left p-3 bg-apex-card/50 hover:bg-apex-card border border-apex-border rounded-lg text-sm text-apex-text hover:text-apex-heading transition-all duration-200 hover:scale-105",children:["“",e,"”"]},s))})}function N(){let{messages:e,status:t}=(0,a.jq)(),[s,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),f=()=>{h(!0),x(!0)};return(0,n.useEffect)(()=>{e.length>0&&i.tq&&x(!0)},[e.length]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-screen bg-apex-dark",children:[(0,r.jsx)(o,{onChatOpen:f}),(0,r.jsxs)("main",{children:[(0,r.jsx)(l,{onChatOpen:f}),(0,r.jsx)(c,{}),(0,r.jsx)(d,{})]}),!s&&(0,r.jsx)("button",{onClick:f,className:"fixed bottom-6 right-6 z-50 w-16 h-16 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group hover:scale-110","aria-label":"Open chat with Lexy",children:(0,r.jsx)("svg",{className:"w-6 h-6 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.014 8.014 0 01-2.84-.508l-5.58 2.14a.507.507 0 01-.638-.642l2.14-5.58A8.012 8.012 0 014 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})})})]}),s&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-apex-dark border border-apex-border rounded-2xl shadow-2xl w-full max-w-4xl h-[80vh] flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 bg-gradient-to-br from-apex-dark to-gray-900",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-apex-heading mb-2",children:"Meet Lexy"}),(0,r.jsx)("p",{className:"text-apex-text",children:"Your intelligent AI assistant for business automation"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex bg-gray-800 p-1 rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 rounded-md text-sm transition-all ".concat(p?"text-gray-400 hover:text-white":"bg-primary-500 text-white"),children:"Voice Chat"}),(0,r.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 rounded-md text-sm transition-all ".concat(p?"bg-primary-500 text-white":"text-gray-400 hover:text-white"),children:"Text Only"})]})}),p?(0,r.jsxs)("div",{className:"text-center max-w-md",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-primary-500 to-primary-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.014 8.014 0 01-2.84-.508l-5.58 2.14a.507.507 0 01-.638-.642l2.14-5.58A8.012 8.012 0 014 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})})}),(0,r.jsx)("p",{className:"text-apex-text text-sm",children:"Text-only mode enabled. Use the chat panel to talk with Lexy!"})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("div",{className:"text-center text-sm text-apex-text mb-4",children:"Try asking:"}),(0,r.jsx)(j,{})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"text-apex-text",children:"Loading voice assistant..."}),children:(0,r.jsx)(m,{requiresUserActionToInitialize:!1,className:"flex flex-col items-center"})}),t!==a.aI.SLEEPING&&t!==a.aI.NONE&&(0,r.jsxs)("div",{className:"mt-8 max-w-md",children:[(0,r.jsx)("div",{className:"text-center text-sm text-apex-text mb-4",children:"Try saying:"}),(0,r.jsx)(j,{})]})]})]}),(0,r.jsxs)("div",{className:"w-96 border-l border-apex-border flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-apex-border flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-apex-heading",children:"Chat with Lexy"}),(0,r.jsx)("button",{onClick:()=>x(!s),className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Close chat",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-apex-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)(v,{})]})]})})]})}}},function(e){e.O(0,[506,971,117,744],function(){return e(e.s=6893)}),_N_E=e.O()}]);